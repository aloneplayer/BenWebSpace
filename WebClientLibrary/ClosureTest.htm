<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>JavaScript : Closure</title>
    <script type="text/javascript">

        var test = "a";

        function testFunc(foo)
        {
            alert(foo);
        }
        
        (testFunc)(test);

        (function(foo)
        {
            alert(foo);
        })(test);

        //在f1之外读取和修改f1中的变量n
        function f1()
        {
            var n = 999;
            nAdd = function () { n += 1 }
            function f2()
            {
                alert(n);
            }
            return f2;
        }
        var result = f1();
        result(); // 999
        nAdd();   //修改n
        result(); // 1000
        var name = "The Window";
        var object = {
            name: "My Object",
            getNameFunc: function ()
            {
                return function ()
                {
                    return this.name;
                };
            }
        };
        alert("Sample 1 : " + object.getNameFunc()());

        var name = "The Window";
        var object = {
            name: "My Object",
            getNameFunc: function ()
            {
                var that = this;
                return function ()
                {
                    return that.name;
                };
            }
        };
        alert("Sample 2 : " + object.getNameFunc()());

        // Find the element with an ID of 'main'
        var obj = document.getElementById("main");
        // Change it's border styling
        obj.style.border = "1px solid red";
        // Initialize a callback that will occur in one second
        setTimeout(function ()
        {
            // Which will hide the object
            obj.style.display = 'none';
        }, 1000);
        // A generic function for displaying a delayed alert message
        function delayedAlert(msg, time)
        {
            // Initialize an enclosed callback
            setTimeout(function ()
            {
                // Which utilizes the msg passed in from the enclosing function
                alert(msg);
            }, time);
        }

        // Call the delayedAlert function with two arguments
        delayedAlert("Welcome!", 2000);

        setTimeout("otherFunction()", 1000);
        // or even…
        setTimeout("otherFunction(" + num + "," + num2 + ")", 1000);
    </script>
</head>
<body>
</body>
</html>
